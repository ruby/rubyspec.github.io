<!DOCTYPE html>
<html>
  <head>
    <title>RubySpec :
      The Standard You Trust&#8482;</title>
    <meta content='text/html;charset=utf-8' http-equiv='content-type'>
    <link href="/stylesheets/application.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/pygments.css" media="screen" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="//use.typekit.net/swa1krd.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  </head>
    <body>
    <div class='container header'>
  <h1><a href='/'>RubySpec</a></h1>
  <p class='tagline'>The Standard You Trust&#8482;</p>
</div>

    <div class='container'>
      <h2 id="ruby-19-issues">Ruby 1.9 Issues</h2>

<p>There are two main problems running the specs on Ruby 1.9:</p>

<ol>
  <li>Ruby 1.9 changes language features and many core library methods.</li>
  <li>Potential bugs in Ruby 1.9</li>
</ol>

<p>The RubySpecs were initially written for Ruby 1.8. Many of the specs work fine with 1.9. However, many of the specs fail on 1.9 because the specs need to be updated. To facilitate the process of updating the specs for 1.9, tags for failures have been added to the RubySpec source.</p>

<p>MSpec provides a special runner script that will read the tags and NOT run specs that fail. You can also exclude tagged specs with the default runner script.</p>

<p>Specs are tagged with ‘fails’ and ‘critical’. Specs tagged as critical are specs that either cause hangs or segfaults.</p>

<p>To run all the specs but exclude failing ones:</p>

<pre>
$ cd rubyspec
$ mspec ci -tr19
</pre>

<p>To run specs but exclude a particular tag:</p>

<pre>
$ mspec -tr19 -G critical
$ mspec -tr19 -G fails
$ mspec -tr19 -G critical -G fails
</pre>

<p>To run only the specs <em>with a particular tag</em>:</p>

<pre>
$ mspec -tr19 -g critical
$ mspec -tr19 -g fails core/array
</pre>

<h3 id="listing-tagged-specs">Listing tagged specs</h3>

<p>To see the descriptions of all the specs tagged:</p>

<pre>
$ mspec tag --list-all
$ mspec tag --list critical
$ mspec tag --list fails
</pre>

<h3 id="removing-tags">Removing tags</h3>

<p>Once the specs have been updated, or bugs fixed in Ruby 1.9, the tags can be removed.</p>

<pre>
$ mspec tag --del fails core/array/append_spec.rb
</pre>

<p>When removing tags, it is usually best to give the specific file to process.</p>

<h3 id="stable-version-of-19">Stable version of 1.9</h3>

<p>RubySpec does not attempt to spec any version of 1.9 prior to the 1.9.2p0
stable release. In <code>ruby_version_is</code> guards, use “1.9” if the behavior is 1.9
specific and has not changed in the stable release of 1.9.2. If 1.9.3 behavior
differs from 1.9.2 stable, then use the appropriate versions in the guards.</p>

<div class="highlight"><pre><code class="ruby"><span class="lineno"> 1</span> <span class="n">ruby_version_is</span> <span class="s2">&quot;&quot;</span> <span class="o">.</span><span class="n">.</span><span class="o">.</span> <span class="s2">&quot;1.9&quot;</span> <span class="k">do</span>
<span class="lineno"> 2</span>   <span class="n">it</span> <span class="s2">&quot;does something on versions prior to 1.9&quot;</span> <span class="k">do</span>
<span class="lineno"> 3</span>     <span class="c1"># ...</span>
<span class="lineno"> 4</span>   <span class="k">end</span>
<span class="lineno"> 5</span> <span class="k">end</span>
<span class="lineno"> 6</span> 
<span class="lineno"> 7</span> <span class="n">ruby_version_is</span> <span class="s2">&quot;1.9&quot;</span> <span class="k">do</span>
<span class="lineno"> 8</span>   <span class="n">it</span> <span class="s2">&quot;does something on 1.9&quot;</span> <span class="k">do</span>
<span class="lineno"> 9</span>     <span class="c1"># ...</span>
<span class="lineno">10</span>   <span class="k">end</span>
<span class="lineno">11</span> <span class="k">end</span>
</code></pre>
</div>

<h3 id="using-rubybug-guards-for-19">Using ruby_bug guards for 1.9</h3>

<p>RubySpec only specifies the behavior of version 1.9 from the stable release at
1.9.2 patchlevel 0. The <code>ruby_bug</code> guard should not be used for any version of
1.9 prior to 1.9.2p0.</p>


    </div>
        <div class='container footer'>
      <p>
  rubyspec.org is Copyright &copy; 2011-12 <a
    href='http://brixen.io'>Brian Ford</a>
</p>
<p>
  <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img
  alt="Creative Commons License" style="border-width:0"
  src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a>
</p>

    </div>

  </body>

</html>
